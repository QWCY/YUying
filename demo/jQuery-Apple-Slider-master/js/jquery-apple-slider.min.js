/* 
*** by:David Yang
*/
+function(a){a.fn.AppleSlider=function(b){function q(a,b){var j,l,m,n,o,p,q;for(i=1,"left"==a?h-=b:"right"==a&&(h+=b),j=h,l=h%f,m=-d*j,n=[],o=[],p=0;f>p;p++)0==p?(n[p]=Math.floor((j+1)/f),o[p]=d*f*n[p]):p==f-1?(n[p]=Math.floor((j-1)/f)+1,o[p]=-d+n[p]*f*d):(n[p]=Math.floor(j/f),o[p]=d*p+n[p]*f*d);for(q=0;f>q;q++)0>l?l=f+l:0==l&&(l=0);for(e.find(".gallery_slide_wrapper").css({transform:"translate3d("+m+"px,0,0)",transition:"all .7s ease-in-out"}),p=0;f>p;p++)e.find(g+'[data-idx="'+p+'"]').css({transform:"translate3d("+o[p]+"px,0,0)",transition:"all .7s ease-in-out"});if(0==l&&"right"==a&&1==b||l==f-1&&"left"==a&&1==b)for(p=0;f>p;p++)0!=p&&p!=f-1&&e.find(g+'[data-idx="'+p+'"]').css({transition:"all 0s ease-in-out"});else 0==l&&"left"==a&&1==b||1==l&&"right"==a&&1==b?e.find(g+'[data-idx="'+(f-1)+'"]').css({transition:"all 0s ease-in-out"}):l==f-2&&"left"==a&&1==b||l==f-1&&"right"==a&&1==b?e.find(g+'[data-idx="0"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"):0==l&&"left"==a&&b>1&&f-1>b||0!=l&&l!=f-1&&"right"==a&&b>1&&f-1>b?e.find(g+'[data-idx="'+(f-1)+'"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"):l==f-1&&"right"==a&&b>1&&f-1>b||0!=l&&l!=f-1&&"left"==a&&b>1&&f-1>b?e.find(g+'[data-idx="0"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"):l==f-1&&"right"==a&&b==f-1?(e.find(g+'[data-idx="'+(f-1)+'"]').css({transition:"all 0s ease-in-out"}),e.find(g+'[data-idx="0"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex")):0==l&&"left"==a&&b==f-1&&(e.find(g+'[data-idx="0"]').css({transition:"all 0s ease-in-out"}),e.find(g+'[data-idx="'+(f-1)+'"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"));if(e.find(g+'[data-idx="'+l+'"]').find(".gallery_item_content").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),e.find(g+'[data-idx="'+l+'"]').find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),l==f-1)for(p=0;f>p;p++)p>1&&(e.find(g+'[data-idx="'+(l-p)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.2*d+"px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),e.find(g+'[data-idx="'+(l-p)+'"]').find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}));else for(p=0;f>p;p++)f-1>p&&p>0&&(e.find(g+'[data-idx="'+(l+p)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.2*d+"px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),e.find(g+'[data-idx="'+(l+p)+'"]').find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}));l>0?(e.find(g+'[data-idx="'+(l-1)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.95*d+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"}),e.find(g+'[data-idx="'+(l-1)+'"]').find(".gallery_image").css({transform:"translate3d("+.9*d+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"})):(e.find(g+'[data-idx="'+(l+f-1)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.95*d+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"}),e.find(g+'[data-idx="'+(l+f-1)+'"]').find(".gallery_image").css({transform:"translate3d("+.9*d+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"})),("right"==a&&b>1&&f-1>b||"left"==a&&b>1&&f-1>b)&&(e.find(g).find(".gallery_item_content").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all 0s ease-in-out"}),e.find(g).find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all 0s ease-in-out"}),l>0?e.find(g+'[data-idx="'+(l-1)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.95*d+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all 0s ease-in-out .7s"}):e.find(g+'[data-idx="'+(l+f-1)+'"]').find(".gallery_image").css({transform:"translate3d("+.9*d+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all 0s ease-in-out .7s"})),e.find(".nav li").eq(l).addClass("active").siblings().removeClass("active"),c.autoplay&&e.find(".nav li").eq(l).addClass("autoplay").siblings().removeClass("autoplay"),clearTimeout(k),k=setTimeout(function(){i=0},700)}function r(){c.autoplay=!0,j=setInterval(function(){q("right",1)},c.autoTime)}function s(){c.autoplay=!1,e.find(".nav li").removeClass("autoplay"),clearInterval(j)}var m,n,o,p,c=a.extend({imgItem:".gallery_item",autoplay:!0,imgNum:3,autoTime:5e3},b),d=a(window).width(),e=a(this),f=c.imgNum,g=c.imgItem,h=0,i=0,j=null,k=null,l=e.find(g);for(m=0;m<l.length;m++)l.eq(m).attr("data-idx",m);for(m=0;f>m;m++)e.find(g+"[data-idx="+m+"]").css({transform:"translate3d("+d*m+"px,0,0)",transition:"all 0s ease-in-out"}),m==f-1&&e.find(g+"[data-idx="+m+"]").css({transform:"translate3d(-"+d+"px,0,0)",transition:"all 0s ease-in-out"});for(n="",o="",p="",m=0;f>m;m++)c.autoplay&&0==m?n='<li data-target="'+m+'" class="nav_slide nav_slide_'+m+' active autoplay"><div class="slide_btn"></div></li>':0==m?n='<li data-target="'+m+'" class="nav_slide nav_slide_'+m+' active"><div class="slide_btn"></div></li>':n+='<li data-target="'+m+'" class="nav_slide nav_slide_'+m+'"><div class="slide_btn"></div></li>';o='<ul class="nav">'+n+"</ul>",e.append(o),640>=d?e.swipe({swipe:function(a,b){s(),"left"==b?0==i&&q("right",1):"right"==b&&0==i&&q("left",1)}}):(p='<div class="nav_btn left"><div class="btn_left"></div></div><div class="nav_btn right"><div class="btn_right"></div></div>',e.append(p),e.find(".nav_btn.right").on("click",function(){s(),0==i&&q("right",1)}),e.find(".nav_btn.left").on("click",function(){s(),0==i&&q("left",1)})),e.find(".nav li").click(function(){var b,c,d;if(s(),1!=i){for(b=h%f,c=a(this).index(),d=0;f>d;d++)0>b?b=f+b:0==b&&(b=0);if(a(this).addClass("active").siblings().removeClass("active"),c>b)q("right",c-b);else if(b>c)q("left",b-c);else if(c==b)return;clearTimeout(k),k=setTimeout(function(){i=0},700)}}),c.autoplay&&r()}}(jQuery);